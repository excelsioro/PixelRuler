<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Proportion Measure - Artist Reference Tool</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --background: hsl(220, 20%, 7%);
      --foreground: hsl(220, 10%, 92%);
      --card: hsl(220, 20%, 10%);
      --secondary: hsl(220, 15%, 15%);
      --muted: hsl(220, 15%, 18%);
      --muted-foreground: hsl(220, 10%, 55%);
      --border: hsl(220, 15%, 18%);
      --accent: hsl(188, 90%, 45%);
      --line-a: hsl(12, 85%, 60%);
      --line-b: hsl(188, 90%, 50%);
      --radius: 0.75rem;
    }
    body { font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--background); color: var(--foreground); min-height: 100vh; display: flex; flex-direction: column; }
    header { display: flex; align-items: center; justify-content: space-between; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border); }
    .logo { display: flex; align-items: center; gap: 0.75rem; }
    .logo-icon { width: 36px; height: 36px; background: hsla(188, 90%, 45%, 0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; }
    .logo-icon svg { width: 20px; height: 20px; color: var(--accent); }
    .logo-text h1 { font-size: 1.125rem; font-weight: 600; line-height: 1.2; }
    .logo-text p { font-size: 0.75rem; color: var(--muted-foreground); }
    .btn { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; font-size: 0.875rem; font-weight: 500; font-family: inherit; background: var(--secondary); color: var(--foreground); border: none; border-radius: var(--radius); cursor: pointer; transition: background 0.15s ease; }
    .btn:hover { background: hsl(220, 15%, 20%); }
    .btn svg { width: 16px; height: 16px; }
    .hidden { display: none !important; }
    main { flex: 1; display: flex; flex-direction: column; }
    @media (min-width: 1024px) { main { flex-direction: row; } }
    .canvas-area { flex: 1; display: flex; align-items: center; justify-content: center; padding: 1.5rem; }
    .upload-zone { position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 1.5rem; width: 100%; max-width: 32rem; aspect-ratio: 4/3; border: 2px dashed var(--border); border-radius: 1rem; background: hsla(220, 20%, 10%, 0.3); transition: all 0.2s ease; cursor: pointer; }
    .upload-zone:hover { border-color: var(--muted-foreground); }
    .upload-zone.dragging { border-color: var(--accent); background: hsla(188, 90%, 45%, 0.1); transform: scale(1.02); }
    .upload-zone input { position: absolute; inset: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }
    .canvas-container { display: flex; flex-direction: column; align-items: center; gap: 1rem; width: 100%; height: 100%; }
    .canvas-wrapper { flex: 1; width: 100%; display: flex; align-items: center; justify-content: center; overflow: hidden; }
    #canvas { max-width: 100%; max-height: 100%; border-radius: var(--radius); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); cursor: crosshair; }
    .canvas-controls { display: flex; align-items: center; gap: 1rem; }
    .instruction { font-size: 0.875rem; font-family: 'JetBrains Mono', monospace; color: var(--muted-foreground); }
    aside { width: 100%; padding: 1.5rem; border-top: 1px solid var(--border); background: hsla(220, 20%, 10%, 0.2); }
    @media (min-width: 1024px) { aside { width: 288px; border-top: none; border-left: 1px solid var(--border); } }
    .results-panel { padding: 1.25rem; background: hsla(220, 20%, 10%, 0.5); backdrop-filter: blur(8px); border-radius: var(--radius); border: 1px solid hsla(220, 15%, 18%, 0.5); }
    .result-value { font-size: 1.25rem; font-family: 'JetBrains Mono', monospace; font-weight: 600; }
    .ratio-value { font-size: 1.5rem; font-family: 'JetBrains Mono', monospace; font-weight: 700; color: var(--accent); }
  </style>
</head>
<body>
<script>
const canvas = document.createElement('canvas');
document.body.appendChild(canvas);
const ctx = canvas.getContext('2d');

let image = null;
let points = [];
let scale = 1;

const LINE_A_COLOR = '#E85D4C';
const LINE_B_COLOR = '#18B8D0';
const DOT_RADIUS = 6;
const LINE_WIDTH = 2;

function calculateDistance(p1, p2) {
  const dx = (p2.x - p1.x) / scale;
  const dy = (p2.y - p1.y) / scale;
  return Math.sqrt(dx * dx + dy * dy);
}

function draw() {
  if (!image) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.drawImage(image, 0, 0, canvas.width, canvas.height);

  function drawPoint(point, color) {
    ctx.beginPath();
    ctx.arc(point.x, point.y, DOT_RADIUS, 0, Math.PI * 2);
    ctx.fillStyle = color;
    ctx.fill();
    ctx.strokeStyle = 'rgba(255,255,255,0.8)';
    ctx.lineWidth = 2;
    ctx.stroke();
  }

  function drawLine(p1, p2, color) {
    ctx.beginPath();
    ctx.moveTo(p1.x, p1.y);
    ctx.lineTo(p2.x, p2.y);
    ctx.strokeStyle = color;
    ctx.lineWidth = LINE_WIDTH;
    ctx.stroke();
  }

  if (points.length >= 1) drawPoint(points[0], LINE_A_COLOR);
  if (points.length >= 2) {
    drawPoint(points[1], LINE_A_COLOR);
    drawLine(points[0], points[1], LINE_A_COLOR);
  }
  if (points.length >= 3) drawPoint(points[2], LINE_B_COLOR);
  if (points.length >= 4) {
    drawPoint(points[3], LINE_B_COLOR);
    drawLine(points[2], points[3], LINE_B_COLOR);
  }
}
</script>
</body>
</html>
